<MudGrid>

  <MudItem xs='12' lg='6'>

    <MudPaper Class="pt-2 ma-2">
      
@*      <Editor Configuration='@_configuration'>
        <ConfigurationMenu>
          <SettingsMenu>
            <MudSwitch @bind-Checked="@_configuration.MinimapEnabled" Label="Minimap" Color='Color.Primary'/>
          </SettingsMenu>
        </ConfigurationMenu>
      </Editor>*@
      
      <SCLEditor Configuration='@_sclConfiguration'
                 OutputConsole='@_consoleStringBuilder'
                 OnNewOutputMessage='@SetOutputBadge'
                 OutputLog='@_testLoggerFactory'
                 OnNewLogMessage='@_onNewLogMessage'
                 DefaultExtension='scl'
                 @ref='@_sclEditorInstance'>
        <Toolbar>
          @if (_sclEditorInstance.RunCancellation != null)
          {
            <MudIconButton Icon='@Icons.Filled.Cancel' OnClick="@_sclEditorInstance.CancelRun"/>
          }
          else
          {
            <MudIconButton Icon='@Icons.Filled.PlayArrow' OnClick="@_sclEditorInstance.Run"/>
          }
        </Toolbar>
        <ConfigurationMenu>
          <SettingsMenu>
            <MudSwitch @bind-Checked="@_sclConfiguration.CompletionEnabled" Label="Code Completion" Color='Color.Primary'/>
            <MudSwitch @bind-Checked="@_sclConfiguration.DiagnosticsEnabled" Label="Error Highlighting" Color='Color.Primary'/>
            <MudSwitch @bind-Checked="@_sclConfiguration.SignatureHelpEnabled" Label="Parameter Help" Color='Color.Primary'/>
            <MudSwitch @bind-Checked="@_sclConfiguration.QuickInfoEnabled" Label="Hover Tips" Color='Color.Primary'/>
            <MudSwitch @bind-Checked="@_sclConfiguration.MinimapEnabled" Label="Minimap" Color='Color.Primary'/>
          </SettingsMenu>
        </ConfigurationMenu>
      </SCLEditor>

    </MudPaper>

  </MudItem>

  <MudItem xs='12' lg='6'>
    
    <MudTabs Elevation='2'
             Rounded='true'
             ApplyEffectsToContainer='true'
             Class='ma-2'
             Styles='height: 40%;'
             @bind-ActivePanelIndex='@ActiveOutputTabPanel'>

      <MudTabPanel Text='Output'
                   BadgeData='@_outputBadge'
                   BadgeDot='@_outputDot'
                   BadgeColor='Color.Secondary'>
        <MudTextField FullWidth='true'
                      Value='@_consoleStringBuilder.ToString()'
                      ReadOnly='true'
                      Lines='12'
                      AdornmentIcon='@Icons.Filled.PlaylistRemove'
                      Adornment='Adornment.End'
                      Class='pa-4'
                      DisableUnderLine='true'
                      OnAdornmentClick='@ClearOutput' />
      </MudTabPanel>

      <MudTabPanel Text='Log'
                   BadgeData='@_logBadge'
                   BadgeDot='@_logDot'
                   BadgeColor='Color.Secondary'>
        <MudTextField FullWidth='true'
                      Value='@LogText()'
                      ReadOnly='true'
                      Lines='12'
                      AdornmentIcon='@Icons.Filled.PlaylistRemove'
                      Adornment='Adornment.End'
                      Class='pa-4'
                      DisableUnderLine='true'
                      OnAdornmentClick='@ClearLogs'/>
      </MudTabPanel>

    </MudTabs>
    
  </MudItem>

  <MudItem xs='12'>
    <FileSelection @ref="_fileSelection" FileSystem='FileSystem' OpenFileAction='OpenFileAction'/>
  </MudItem>

</MudGrid>
