@using Reductech.EDR.Core.Internal.Serialization
@using Microsoft.Extensions.Logging.Abstractions
@using Reductech.EDR.Core.ExternalProcesses
@using Reductech.EDR.Core.Internal
@using System.Threading
@using CSharpFunctionalExtensions
@using JetBrains.Annotations
@using Microsoft.Extensions.Logging
@using Reductech.EDR.Core.Internal.Parser
@using System.IO

<MudGrid>
  
  <MudItem xs='12' lg='6'>
    
    <MudPaper Class="pa-16 ma-2" Square="true">
      <MonacoEditor Id="scl-monaco" @ref="_editor" ConstructionOptions="EditorConstructionOptions"/>
      @if (CancellationTokenSource != null)
      {
        <MudIconButton Icon='@Icons.Material.Filled.Cancel' OnClick="Cancel"/>
      }
      else
      {
        <MudIconButton Icon='@Icons.Material.Filled.PlayArrow' OnClick="Run"/>
      }

    </MudPaper>

    
  </MudItem>
  
  <MudItem xs='12' lg='6'>
    <MudTextField FullWidth='true'
                  Value="@_consoleStringBuilder.ToString()"
                  Label="Output"
                  ReadOnly="true"
                  Variant="Variant.Outlined"
                  Lines="10"
                  AdornmentIcon="@Icons.Material.Filled.Clear"
                  Adornment="Adornment.End"
                  Style='width:100%'
                  OnAdornmentClick="() => _consoleStringBuilder.Clear()"/>
      
    <MudTextField FullWidth='true'
                  Value="@LogText()"
                  Label="Log"
                  ReadOnly="true"
                  Variant="Variant.Outlined"
                  Lines="10"
                  AdornmentIcon="@Icons.Material.Filled.Clear"
                  Adornment="Adornment.End"
                  Style='width:100%'
                  OnAdornmentClick="@ClearLogs"/>

  </MudItem>
  

  
  <MudItem xs='12'>
    <MudExpansionPanels>
      <MudExpansionPanel Text='Files'>
        <FileSelection FileSystem='@_fileSystem' SetSCLAction='@SetSCL'/>
      </MudExpansionPanel>
    </MudExpansionPanels>
  </MudItem>

</MudGrid>










<style>
  .monaco-editor-container { height: 500px; }


</style>
